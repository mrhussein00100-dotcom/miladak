/**
 * Script to add keywords for historical-events page
 */

const Database = require('better-sqlite3');
const path = require('path');

const dbPath = path.join(__dirname, '..', 'database.sqlite');
const db = new Database(dbPath);

// ุงููููุงุช ุงูููุชุงุญูุฉ ูุตูุญุฉ ุงูุฃุญุฏุงุซ ุงูุชุงุฑูุฎูุฉ - 120 ูููุฉ
const keywords = [
  // ุฃุญุฏุงุซ ุชุงุฑูุฎูุฉ ุนุงูุฉ
  'ุฃุญุฏุงุซ ุชุงุฑูุฎูุฉ',
  'ูุฐุง ุงูููู ูู ุงูุชุงุฑูุฎ',
  'ูุงุฐุง ุญุฏุซ ูู ููู ูููุงุฏู',
  'ุฃุญุฏุงุซ ููู ุงููููุงุฏ',
  'ุชุงุฑูุฎ ุงูููู',
  'ุฃุญุฏุงุซ ุชุงุฑูุฎูุฉ ูููุฉ',
  'ุชุงุฑูุฎ ููู ูููุงุฏู',
  'ูุง ุญุฏุซ ูู ูุฐุง ุงูููู',
  'ุฃุญุฏุงุซ ุนุงูููุฉ',
  'ุชุงุฑูุฎ ุงูุนุงูู',

  // ุฃููุงุน ุงูุฃุญุฏุงุซ
  'ุฃุญุฏุงุซ ุณูุงุณูุฉ',
  'ุฃุญุฏุงุซ ุนูููุฉ',
  'ุฃุญุฏุงุซ ุฑูุงุถูุฉ',
  'ุฃุญุฏุงุซ ุซูุงููุฉ',
  'ุฃุญุฏุงุซ ุงูุชุตุงุฏูุฉ',
  'ุฃุญุฏุงุซ ุนุณูุฑูุฉ',
  'ุฃุญุฏุงุซ ูููุฉ',
  'ุฃุญุฏุงุซ ุฏูููุฉ',

  // ููุงููุฏ ููููุงุช
  'ููุงููุฏ ูุดุงููุฑ',
  'ูููุงุช ูุดุงููุฑ',
  'ูู ููุฏ ูู ูุฐุง ุงูููู',
  'ูู ุชููู ูู ูุฐุง ุงูููู',
  'ูุดุงููุฑ ููู ูููุงุฏู',
  'ุดุฎุตูุงุช ุชุงุฑูุฎูุฉ',

  // ุงูุชุดุงูุงุช ูุงุฎุชุฑุงุนุงุช
  'ุงูุชุดุงูุงุช ุชุงุฑูุฎูุฉ',
  'ุงุฎุชุฑุงุนุงุช ุชุงุฑูุฎูุฉ',
  'ุงูุชุดุงูุงุช ุนูููุฉ',
  'ุงุฎุชุฑุงุนุงุช ูููุฉ',
  'ุชุทูุฑ ุงูุนููู',
  'ุชุงุฑูุฎ ุงูุนูู',

  // ุญุฑูุจ ููุนุงุฑู
  'ุญุฑูุจ ุชุงุฑูุฎูุฉ',
  'ูุนุงุฑู ุชุงุฑูุฎูุฉ',
  'ุญุฑูุจ ุนุงูููุฉ',
  'ูุนุงุฑู ูุงุตูุฉ',
  'ุชุงุฑูุฎ ุงูุญุฑูุจ',
  'ุฃุญุฏุงุซ ุนุณูุฑูุฉ',

  // ุชุงุฑูุฎ ุนุฑุจู ูุฅุณูุงูู
  'ุฃุญุฏุงุซ ุนุฑุจูุฉ',
  'ุชุงุฑูุฎ ุงูุนุฑุจ',
  'ุฃุญุฏุงุซ ุฅุณูุงููุฉ',
  'ุชุงุฑูุฎ ุงูุฅุณูุงู',
  'ุงูุญุถุงุฑุฉ ุงูุนุฑุจูุฉ',
  'ุงูุชุงุฑูุฎ ุงูุฅุณูุงูู',

  // ุชูููู ูุชูุงุฑูุฎ
  'ุชูููู ุชุงุฑูุฎู',
  'ููููุงุช ุชุงุฑูุฎูุฉ',
  'ุงูุชูููู ุงููููุงุฏู',
  'ุงูุชูููู ุงููุฌุฑู',
  'ุชุญููู ุงูุชูุงุฑูุฎ',
  'ุญุณุงุจ ุงูุชูุงุฑูุฎ',

  // ุญุถุงุฑุงุช
  'ุงูุญุถุงุฑุงุช ุงููุฏููุฉ',
  'ุงูุญุถุงุฑุฉ ุงููุตุฑูุฉ',
  'ุงูุญุถุงุฑุฉ ุงูุฑููุงููุฉ',
  'ุงูุญุถุงุฑุฉ ุงููููุงููุฉ',
  'ุงูุญุถุงุฑุฉ ุงููุงุฑุณูุฉ',
  'ุญุถุงุฑุฉ ุจูุงุฏ ุงูุฑุงูุฏูู',

  // ุนุตูุฑ ุชุงุฑูุฎูุฉ
  'ุงูุนุตูุฑ ุงููุณุทู',
  'ุงูุนุตุฑ ุงูุญุฏูุซ',
  'ุงูุนุตุฑ ุงููุฏูู',
  'ุนุตุฑ ุงูููุถุฉ',
  'ุงูุซูุฑุฉ ุงูุตูุงุนูุฉ',
  'ุงูุนุตุฑ ุงูุฐูุจู',

  // ุฃุญุฏุงุซ ูุญุฏุฏุฉ
  'ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุฃููู',
  'ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉ',
  'ุงูุซูุฑุฉ ุงููุฑูุณูุฉ',
  'ุงูุซูุฑุฉ ุงูุฃูุฑูููุฉ',
  'ุณููุท ุงูุฃูุฏูุณ',
  'ูุชุญ ุงููุณุทูุทูููุฉ',

  // ุฑูุงุถุฉ
  'ุชุงุฑูุฎ ุงูุฑูุงุถุฉ',
  'ุฃุญุฏุงุซ ุฑูุงุถูุฉ ุชุงุฑูุฎูุฉ',
  'ุงูุฃูุนุงุจ ุงูุฃูููุจูุฉ',
  'ูุฃุณ ุงูุนุงูู',
  'ุฃุจุทุงู ุฑูุงุถููู',
  'ุฃุฑูุงู ููุงุณูุฉ',

  // ูู ูุซูุงูุฉ
  'ุชุงุฑูุฎ ุงููู',
  'ุฃุญุฏุงุซ ุซูุงููุฉ ุชุงุฑูุฎูุฉ',
  'ููุงููู ูุดุงููุฑ',
  'ุฃุฏุจุงุก ูุดุงููุฑ',
  'ููุณููููู ูุดุงููุฑ',
  'ุฃููุงู ุชุงุฑูุฎูุฉ',

  // ุนููู ูุชูููููุฌูุง
  'ุชุงุฑูุฎ ุงูุชูููููุฌูุง',
  'ุงุฎุชุฑุงุนุงุช ุญุฏูุซุฉ',
  'ุนููุงุก ูุดุงููุฑ',
  'ุฌูุงุฆุฒ ููุจู',
  'ุงูุชุดุงูุงุช ูุถุงุฆูุฉ',
  'ุชุทูุฑ ุงูุทุจ',

  // ุณูุงุณุฉ
  'ุชุงุฑูุฎ ุงูุณูุงุณุฉ',
  'ูุงุฏุฉ ุชุงุฑูุฎููู',
  'ูููู ูุฑุคุณุงุก',
  'ูุนุงูุฏุงุช ุชุงุฑูุฎูุฉ',
  'ุงุณุชููุงู ุงูุฏูู',
  'ุซูุฑุงุช ุดุนุจูุฉ',

  // ุฌุบุฑุงููุง ูุงูุชุดุงูุงุช
  'ุงูุชุดุงู ุฃูุฑููุง',
  'ุฑุญูุงุช ุงุณุชูุดุงููุฉ',
  'ูุณุชูุดููู ูุดุงููุฑ',
  'ุฎุฑุงุฆุท ุชุงุฑูุฎูุฉ',
  'ุทุฑู ุงูุชุฌุงุฑุฉ ุงููุฏููุฉ',
  'ุทุฑูู ุงูุญุฑูุฑ',

  // ูููุงุฏู
  'ูููุน ูููุงุฏู',
  'ูููุงุฏู ุฃุญุฏุงุซ ุชุงุฑูุฎูุฉ',
  'ูููุงุฏู ุชุงุฑูุฎ',
  'ุญุงุณุจุฉ ูููุงุฏู',
  'ุฃุฏูุงุช ูููุงุฏู',
  'ูููุงุฏู ุงูุนุฑุจู',

  // ูููุงุช ุฅุถุงููุฉ
  'ุชุงุฑูุฎ ุงูููู ุงููููุงุฏู',
  'ุฃุญุฏุงุซ ุงูููู',
  'ุฐูุฑู ุงูููู',
  'ูู ูุซู ูุฐุง ุงูููู',
  'ุญุฏุซ ูู ูุซู ูุฐุง ุงูููู',
  'ุชุงุฑูุฎ ูุฐุง ุงูููู',
  'ุฃุญุฏุงุซ ุชุงุฑูุฎูุฉ ููููุฉ',
  'ููููุงุช ุงูุชุงุฑูุฎ',
  'ููุณูุนุฉ ุงูุฃุญุฏุงุซ',
  'ูุงููุณ ุงูุชุงุฑูุฎ',
];

const pageTitle = 'ุฃุญุฏุงุซ ุชุงุฑูุฎูุฉ - ุงูุชุดู ูุง ุญุฏุซ ูู ููู ูููุงุฏู';
const metaDescription =
  'ุงูุชุดู ุงูุฃุญุฏุงุซ ุงูุชุงุฑูุฎูุฉ ุงููููุฉ ุงูุชู ููุนุช ูู ููู ูููุงุฏู. ุชุตูุญ ุขูุงู ุงูุฃุญุฏุงุซ ุงูุณูุงุณูุฉ ูุงูุนูููุฉ ูุงูุฑูุงุถูุฉ ูุงูุซูุงููุฉ ุญุณุจ ุงูุชุงุฑูุฎ.';

try {
  // ุงูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏูู
  const tableExists = db
    .prepare(
      `
    SELECT name FROM sqlite_master WHERE type='table' AND name='page_keywords'
  `
    )
    .get();

  if (!tableExists) {
    console.log('Creating page_keywords table...');
    db.exec(`
      CREATE TABLE IF NOT EXISTS page_keywords (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        page_type TEXT NOT NULL,
        page_slug TEXT NOT NULL,
        page_title TEXT NOT NULL,
        keywords TEXT NOT NULL,
        meta_description TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        UNIQUE(page_type, page_slug)
      )
    `);
  }

  // ุงูุชุญูู ูู ูุฌูุฏ ุงููููุงุช ุงูููุชุงุญูุฉ
  const existing = db
    .prepare(
      `
    SELECT * FROM page_keywords WHERE page_type = ? AND page_slug = ?
  `
    )
    .get('page', 'historical-events');

  if (existing) {
    console.log('Updating existing keywords...');
    db.prepare(
      `
      UPDATE page_keywords 
      SET keywords = ?, page_title = ?, meta_description = ?, updated_at = CURRENT_TIMESTAMP
      WHERE page_type = ? AND page_slug = ?
    `
    ).run(
      keywords.join(','),
      pageTitle,
      metaDescription,
      'page',
      'historical-events'
    );
    console.log('โ Keywords updated successfully!');
  } else {
    console.log('Inserting new keywords...');
    db.prepare(
      `
      INSERT INTO page_keywords (page_type, page_slug, page_title, keywords, meta_description)
      VALUES (?, ?, ?, ?, ?)
    `
    ).run(
      'page',
      'historical-events',
      pageTitle,
      keywords.join(','),
      metaDescription
    );
    console.log('โ Keywords inserted successfully!');
  }

  // ุนุฑุถ ุงููุชูุฌุฉ
  const result = db
    .prepare(
      `
    SELECT * FROM page_keywords WHERE page_type = ? AND page_slug = ?
  `
    )
    .get('page', 'historical-events');

  console.log('\n๐ Result:');
  console.log(`- Page Type: ${result.page_type}`);
  console.log(`- Page Slug: ${result.page_slug}`);
  console.log(`- Page Title: ${result.page_title}`);
  console.log(`- Keywords Count: ${result.keywords.split(',').length}`);
  console.log(
    `- Meta Description: ${result.meta_description?.substring(0, 50)}...`
  );
} catch (error) {
  console.error('โ Error:', error.message);
} finally {
  db.close();
}
