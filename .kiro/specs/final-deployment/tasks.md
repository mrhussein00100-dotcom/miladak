# خطة تنفيذ إكمال النشر النهائي - ميلادك v2

## المهام

### 1. التحقق من جاهزية النظام المحلي

- [ ] 1.1 تشغيل اختبار قاعدة البيانات المحلية

  - تشغيل `node scripts/test-database-simple.js`
  - التحقق من وجود 28 جدول مع البيانات الصحيحة
  - _المتطلبات: 1.1_

- [ ] 1.2 فحص وتحديث مفاتيح API في .env.local

  - التحقق من صحة GROQ_API_KEY
  - التحقق من صحة GEMINI_API_KEY
  - التحقق من صحة PEXELS_API_KEY
  - إضافة متغيرات AdSense
  - _المتطلبات: 1.2_

- [ ] 1.3 اختبار البناء المحلي

  - تشغيل `npm run build`
  - التأكد من عدم وجود أخطاء TypeScript
  - التأكد من نجاح عملية البناء
  - _المتطلبات: 1.3_

- [ ] 1.4 تشغيل الخادم المحلي واختبار الوظائف الأساسية
  - تشغيل `npm run dev`
  - اختبار الصفحة الرئيسية
  - اختبار حاسبة العمر
  - اختبار صفحة الأدوات
  - _المتطلبات: 1.4_

### 2. إعداد قاعدة بيانات PostgreSQL في Vercel

- [ ] 2.1 إنشاء قاعدة بيانات PostgreSQL في Vercel

  - الدخول إلى Vercel Dashboard
  - إنشاء PostgreSQL database جديدة
  - الحصول على POSTGRES_URL
  - _المتطلبات: 2.1_

- [ ] 2.2 اختبار الاتصال بـ PostgreSQL

  - تحديث متغير POSTGRES_URL في البيئة المحلية
  - تشغيل `node scripts/test-postgres-connection.js`
  - التأكد من نجاح الاتصال
  - _المتطلبات: 2.3_

- [ ] 2.3 ترحيل البيانات من SQLite إلى PostgreSQL

  - تشغيل `node scripts/migrate-to-postgres-complete.js`
  - مراقبة عملية الترحيل
  - التحقق من نجاح ترحيل جميع الجداول
  - _المتطلبات: 2.2_

- [ ] 2.4 التحقق من سلامة البيانات المرحلة
  - مقارنة عدد السجلات في كلا القاعدتين
  - اختبار استعلامات عينة من PostgreSQL
  - التأكد من صحة البيانات العربية
  - _المتطلبات: 2.4_

### 3. تكوين متغيرات البيئة في Vercel

- [ ] 3.1 إضافة متغيرات قاعدة البيانات

  - إضافة POSTGRES_URL
  - إضافة DATABASE_TYPE=postgresql
  - _المتطلبات: 3.1_

- [ ] 3.2 إضافة مفاتيح خدمات الذكاء الاصطناعي

  - إضافة GROQ_API_KEY
  - إضافة GEMINI_API_KEY
  - إضافة HUGGINGFACE_API_KEY (اختياري)
  - إضافة COHERE_API_KEY (اختياري)
  - _المتطلبات: 3.2_

- [ ] 3.3 إضافة مفاتيح الخدمات الأخرى

  - إضافة PEXELS_API_KEY
  - إضافة NEXT_PUBLIC_PEXELS_API_KEY
  - إضافة NEXT_PUBLIC_ADSENSE_CLIENT
  - إضافة ADSENSE_PUBLISHER_ID
  - _المتطلبات: 3.3_

- [ ] 3.4 إضافة متغيرات الموقع
  - إضافة NEXT_PUBLIC_APP_URL=https://miladak.vercel.app
  - إضافة NEXT_PUBLIC_APP_NAME=ميلادك
  - إضافة NEXT_PUBLIC_BASE_URL=https://miladak.vercel.app
  - إضافة AUTH_SECRET (مفتاح عشوائي قوي)
  - _المتطلبات: 3.4_

### 4. النشر على Vercel

- [ ] 4.1 تحضير الكود للنشر

  - التأكد من تحديث .gitignore
  - التأكد من عدم رفع ملفات البيئة الحساسة
  - إنشاء commit جديد مع التحديثات
  - _المتطلبات: 4.1_

- [ ] 4.2 رفع الكود إلى GitHub ومراقبة النشر

  - تشغيل `git add .`
  - تشغيل `git commit -m "feat: Final deployment ready"`
  - تشغيل `git push origin main`
  - مراقبة عملية النشر في Vercel Dashboard
  - _المتطلبات: 4.1, 4.2_

- [ ] 4.3 التحقق من نجاح النشر
  - زيارة الرابط المنشور
  - التأكد من تحميل الصفحة الرئيسية
  - فحص console للأخطاء
  - _المتطلبات: 4.2_

### 5. اختبار شامل للموقع المنشور

- [ ] 5.1 اختبار الصفحات الأساسية

  - اختبار الصفحة الرئيسية `/`
  - اختبار صفحة الأدوات `/tools`
  - اختبار صفحة المقالات `/articles`
  - اختبار صفحة حاسبة العمر `/calculate-birthday`
  - _المتطلبات: 4.3_

- [ ] 5.2 اختبار API endpoints

  - اختبار `/api/tools`
  - اختبار `/api/articles`
  - اختبار `/api/daily-birthdays/[month]/[day]`
  - اختبار `/api/categories`
  - _المتطلبات: 4.3_

- [ ] 5.3 اختبار الوظائف التفاعلية

  - اختبار حاسبة العمر مع تواريخ مختلفة
  - اختبار البحث في الأدوات
  - اختبار تصفح المقالات
  - اختبار عرض المواليد المشهورة
  - _المتطلبات: 4.4_

- [ ] 5.4 اختبار الأداء والاستجابة
  - قياس زمن تحميل الصفحات
  - التأكد من الاستجابة < 3 ثوان
  - اختبار الموقع على الهاتف المحمول
  - فحص Core Web Vitals
  - _المتطلبات: 5.1_

### 6. المراقبة والتحقق النهائي

- [ ] 6.1 فحص الأخطاء والتحذيرات

  - مراجعة Vercel Function Logs
  - فحص Browser Console للأخطاء
  - التأكد من عدم وجود 404 errors
  - _المتطلبات: 5.3_

- [ ] 6.2 اختبار خدمات الذكاء الاصطناعي

  - اختبار توليد المحتوى بـ Groq
  - اختبار توليد المحتوى بـ Gemini
  - اختبار البحث عن الصور بـ Pexels
  - _المتطلبات: 5.2_

- [ ] 6.3 إنشاء تقرير النشر النهائي

  - توثيق جميع الخطوات المكتملة
  - تسجيل أي مشاكل وحلولها
  - إنشاء قائمة بالروابط المهمة
  - _المتطلبات: 5.4_

- [ ] 6.4 إعداد المراقبة المستمرة
  - تفعيل Vercel Analytics
  - إعداد تنبيهات الأخطاء
  - جدولة النسخ الاحتياطية
  - _المتطلبات: 5.1_

### 7. التوثيق والتسليم

- [ ] 7.1 تحديث ملف README.md

  - إضافة رابط الموقع المباشر
  - تحديث تعليمات التشغيل
  - إضافة معلومات النشر
  - _المتطلبات: جميع المتطلبات_

- [ ] 7.2 إنشاء دليل الصيانة
  - توثيق عمليات النسخ الاحتياطي
  - توثيق إجراءات استكشاف الأخطاء
  - توثيق عمليات التحديث
  - _المتطلبات: جميع المتطلبات_

## نقاط التحقق

### نقطة تحقق 1: بعد إكمال المهام 1-2

- التأكد من عمل النظام محلياً مع PostgreSQL
- التأكد من نجاح ترحيل البيانات

### نقطة تحقق 2: بعد إكمال المهام 3-4

- التأكد من نجاح النشر على Vercel
- التأكد من تحميل الصفحة الرئيسية

### نقطة تحقق 3: بعد إكمال المهام 5-6

- التأكد من عمل جميع الوظائف
- التأكد من الأداء المطلوب

## الملاحظات المهمة

- **لا تنس**: نسخ احتياطي من قاعدة البيانات قبل الترحيل
- **تذكر**: اختبار جميع الوظائف قبل إعلان اكتمال النشر
- **مهم**: مراقبة الأداء في الساعات الأولى بعد النشر
- **ضروري**: الاحتفاظ بنسخة من جميع المفاتيح والإعدادات
